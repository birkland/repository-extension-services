<?xml version='1.0' encoding='UTF-8'?>
<features xmlns="http://karaf.apache.org/xmlns/features/v1.0.0" name="amherst-repo-services-${project.version}">
  <repository>mvn:org.fcrepo.camel/fcrepo-camel/${fcrepo-camel.version}/xml/features</repository>
  <repository>mvn:org.apache.camel.karaf/apache-camel/${camel.version}/xml/features</repository>
  <repository>mvn:org.apache.activemq/activemq-karaf/${activemq.version}/xml/features</repository>

  <feature name="acrepo-idiomatic" version="${project.version}" resolver="(obr)" start-level="50">
    <details>Installs the id mapping service</details>

    <feature version="${camel.version}">camel</feature>
    <feature version="${camel.version}">camel-blueprint</feature>
    <feature version="${camel.version}">camel-jetty</feature>
    <feature version="${camel.version}">camel-jackson</feature>
    <feature version="${camel.version}">camel-sql</feature>
    <feature version="${fcrepo-camel.version}">fcrepo-camel</feature>

    <bundle>mvn:edu.amherst.acdc/acrepo-idiomatic/{project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.idiomatic.cfg">mvn:edu.amherst.acdc/acrepo-idiomatic/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-idiomatic-pgsql" version="${project.version}" resolver="(obr)" start-level="50">
    <details>Installs the id mapping service database</details>

    <feature>jdbc</feature>
    <feature>transaction</feature>
    <feature>jndi</feature>

    <bundle dependency="true">wrap:mvn:postgresql/postgresql/${postgresql.version}</bundle>

    <bundle>mvn:edu.amherst.acdc/acrepo-idiomatic-pgsql/{project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.idiomatic.pgsql.cfg">mvn:edu.amherst.acdc/acrepo-idiomatic-pgsql/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-mint-service" version="${project.version}" resolver="(obr)" start-level="50">
    <details>Installs the id minter</details>

    <bundle>mvn:edu.amherst.acdc/acrepo-mint-service/${project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.mint.cfg">mvn:edu.amherst.acdc/acrepo-mint-service/${project.version}/cfg/configuration</configfile>
  </feature>

</features>
