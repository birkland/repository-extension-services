<?xml version='1.0' encoding='UTF-8'?>
<features xmlns="http://karaf.apache.org/xmlns/features/v1.4.0" name="amherst-repo-services-${project.version}">
  <repository>mvn:org.fcrepo.camel/fcrepo-camel/${fcrepo-camel.version}/xml/features</repository>
  <repository>mvn:org.apache.camel.karaf/apache-camel/${camel.version}/xml/features</repository>
  <repository>mvn:org.apache.activemq/activemq-karaf/${activemq.version}/xml/features</repository>
  <repository>mvn:org.ops4j.pax.jdbc/pax-jdbc-features/${pax-jdbc.version}/xml/features</repository>

  <feature name="acrepo-idiomatic" version="${project.version}">
    <details>Installs the id mapping service</details>

    <feature>jndi</feature>

    <feature version="${camel.version}">camel</feature>
    <feature version="${camel.version}">camel-blueprint</feature>
    <feature version="${camel.version}">camel-jetty9</feature>
    <feature version="${camel.version}">camel-jackson</feature>
    <feature version="${camel.version}">camel-sql</feature>
    <feature version="${activemq.version}">activemq-camel</feature>
    <feature version="${fcrepo-camel.version}">fcrepo-camel</feature>

    <bundle dependency="true">mvn:org.codehaus.woodstox/woodstox-core-asl/${woodstox.version}</bundle>

    <bundle>mvn:edu.amherst.acdc/acrepo-idiomatic/${project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.idiomatic.cfg">mvn:edu.amherst.acdc/acrepo-idiomatic/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-idiomatic-pgsql" version="${project.version}">
    <details>Installs the id mapping service database</details>

    <feature>jdbc</feature>
    <feature>jndi</feature>
    <feature>transaction</feature>
    <feature>pax-jdbc-config</feature>
    <feature>pax-jdbc-postgresql</feature>

    <bundle>mvn:org.postgresql/postgresql/${postgresql.version}</bundle>

    <configfile finalname="/etc/org.ops4j.datasource-idiomatic.cfg">mvn:edu.amherst.acdc/acrepo-idiomatic-pgsql/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-exts-image" version="${project.version}">
    <details>Installs the image service</details>

    <feature version="${camel.version}">camel</feature>
    <feature version="${camel.version}">camel-blueprint</feature>
    <feature version="${camel.version}">camel-jetty9</feature>
    <feature version="${camel.version}">camel-http4</feature>
    <feature version="${camel.version}">camel-exec</feature>

    <bundle>mvn:edu.amherst.acdc/acrepo-exts-image/${project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.exts.image.cfg">mvn:edu.amherst.acdc/acrepo-exts-image/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-services-ldcache" version="${project.version}">
    <details>Installs the LDCache service</details>

    <bundle>mvn:edu.amherst.acdc/acrepo-services-ldcache/${project.version}</bundle>

    <feature version="${project.version}">acrepo-libs-marmotta</feature>

    <configfile finalname="/etc/edu.amherst.acdc.services.ldcache.cfg">mvn:edu.amherst.acdc/acrepo-services-ldcache/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-services-ldcache-file" version="${project.version}">
    <details>Installs the LDCache service</details>

    <bundle>mvn:edu.amherst.acdc/acrepo-services-ldcache-file/${project.version}</bundle>

    <feature version="${project.version}">acrepo-libs-marmotta</feature>

    <bundle>${wrapped.bundle.location}/org.apache.marmotta.ldcache-backend-file-${marmotta.version}.jar</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.services.ldcache.file.cfg">mvn:edu.amherst.acdc/acrepo-services-ldcache-file/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-services-mint" version="${project.version}">
    <details>Installs the id minter</details>

    <bundle dependency="true">mvn:org.apache.commons/commons-lang3/${commons-lang.version}</bundle>

    <bundle>mvn:edu.amherst.acdc/acrepo-services-mint/${project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.services.mint.cfg">mvn:edu.amherst.acdc/acrepo-services-mint/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-services-pcdm" version="${project.version}">
    <details>Installs the PCDM Resource service</details>

    <feature version="${project.version}">acrepo-libs-jena</feature>

    <bundle>mvn:edu.amherst.acdc/acrepo-services-pcdm/${project.version}</bundle>
  </feature>

  <feature name="acrepo-services-validation" version="${project.version}">
    <details>Installs the validation service</details>

    <feature version="${project.version}">acrepo-libs-jena</feature>

    <bundle>mvn:edu.amherst.acdc/acrepo-services-validation/${project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.services.validation.cfg">mvn:edu.amherst.acdc/acrepo-services-validation/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-exts-serialize-xml" version="${project.version}">
    <details>Installs the MODS/XML and DC/XML serialization service</details>

    <feature version="${camel.version}">camel</feature>
    <feature version="${camel.version}">camel-blueprint</feature>
    <feature version="${camel.version}">camel-jetty9</feature>
    <feature version="${camel.version}">camel-saxon</feature>
    <feature version="${fcrepo-camel.version}">fcrepo-camel</feature>

    <bundle>mvn:edu.amherst.acdc/acrepo-exts-serialize-xml/${project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.exts.serialize.xml.cfg">mvn:edu.amherst.acdc/acrepo-exts-serialize-xml/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-services-jsonld" version="${project.version}">
    <details>Installs the JSON-LD transformation OSGi service</details>

    <feature version="${project.version}">acrepo-libs-jsonld</feature>

    <bundle>mvn:edu.amherst.acdc/acrepo-services-jsonld/${project.version}</bundle>
  </feature>

  <feature name="acrepo-exts-jsonld" version="${project.version}">
    <details>Installs a sample JSON-LD transformation workflow</details>

    <feature version="${camel.version}">camel</feature>
    <feature version="${camel.version}">camel-blueprint</feature>
    <feature version="${camel.version}">camel-jetty9</feature>
    <feature version="${fcrepo-camel.version}">fcrepo-camel</feature>
    <feature version="${project.version}">acrepo-services-jsonld</feature>

    <bundle>mvn:edu.amherst.acdc/acrepo-exts-jsonld/${project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.exts.jsonld.cfg">mvn:edu.amherst.acdc/acrepo-exts-jsonld/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-template-mustache" version="${project.version}">
    <details>Installs a sample JSON-LD-based template rendering service</details>

    <feature version="${camel.version}">camel</feature>
    <feature version="${camel.version}">camel-blueprint</feature>
    <feature version="${camel.version}">camel-mustache</feature>
    <feature version="${camel.version}">camel-jetty9</feature>
    <feature version="${camel.version}">camel-jackson</feature>
    <feature version="${camel.version}">camel-http4</feature>
    <feature version="${fcrepo-camel.version}">fcrepo-camel</feature>
    <feature version="${project.version}">acrepo-services-jsonld</feature>

    <bundle>mvn:edu.amherst.acdc/acrepo-template-mustache/${project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.template.mustache.cfg">mvn:edu.amherst.acdc/acrepo-template-mustache/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-exts-fits" version="${project.version}">
    <details>Installs a FITS RESTful service</details>

    <feature version="${camel.version}">camel</feature>
    <feature version="${camel.version}">camel-blueprint</feature>
    <feature version="${camel.version}">camel-jetty9</feature>
    <feature version="${camel.version}">camel-http4</feature>

    <bundle>mvn:edu.amherst.acdc/acrepo-exts-fits/${project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.exts.fits.cfg">mvn:edu.amherst.acdc/acrepo-exts-fits/${project.version}/cfg/configuration</configfile>
  </feature>

  <feature name="acrepo-libs-jena" version="${project.version}">
    <details>Installs jena and related dependencies</details>

    <feature version="${project.version}" dependency="true">acrepo-libs-jsonld</feature>

    <bundle>mvn:org.apache.jena/jena-osgi/${jena.version}</bundle>

    <bundle dependency="true">mvn:org.apache.commons/commons-lang3/${commons-lang.version}</bundle>
    <bundle dependency="true">mvn:org.apache.commons/commons-csv/${commons-csv.version}</bundle>
    <bundle dependency="true">mvn:org.apache.thrift/libthrift/${thrift.version}</bundle>
    <bundle dependency="true">mvn:com.github.andrewoma.dexx/collection/${dexx.version}</bundle>
  </feature>

  <feature name="acrepo-libs-sesame" version="${project.version}">
    <details>Installs the OpenRDF libraries</details>

    <feature prerequisite="true" dependency="false">wrap</feature>
    <feature version="${project.version}" dependency="true">acrepo-libs-jackson</feature>

    <bundle>wrap:mvn:org.openrdf.sesame/sesame-repository-event/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-sail-memory/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-model/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-util/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-repository-api/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-rio-api/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-query/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-queryresultio-api/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-rio-rdfjson/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-rio-rdfxml/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-rio-turtle/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-rio-n3/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-repository-sail/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-queryparser-api/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-queryalgebra-model/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-rio-trig/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-sail-api/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-sail-nativerdf/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-sail-inferencer/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-queryalgebra-evaluation/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-repository-sparql/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-queryparser-sparql/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-queryresultio-sparqlxml/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-http-client/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-http-protocol/${sesame.version}</bundle>
    <bundle>wrap:mvn:org.openrdf.sesame/sesame-rio-ntriples/${sesame.version}</bundle>

    <bundle>mvn:com.github.jsonld-java/jsonld-java-sesame/${jsonld-sesame.version}</bundle>
    <bundle>mvn:com.github.jsonld-java/jsonld-java/${jsonld-sesame.version}</bundle>

    <bundle dependency="true">${wrapped.bundle.location}/commons-httpclient.commons-httpclient-${commons-httpclient.version}.jar</bundle>
    <bundle dependency="true">mvn:org.apache.httpcomponents/httpclient-osgi/${httpclient.version}</bundle>
    <bundle dependency="true">mvn:org.apache.httpcomponents/httpcore-osgi/${httpcore.version}</bundle>
    <bundle dependency="true">mvn:commons-codec/commons-codec/${commons-codec.version}</bundle>
    <bundle dependency="true">mvn:commons-io/commons-io/${commons-io.version}</bundle>
  </feature>

  <feature name="acrepo-libs-marmotta" version="${project.version}">
    <details>Installs the Marmotta libraries</details>

    <feature version="${project.version}" dependency="true">acrepo-libs-sesame</feature>
    <feature version="${project.version}" dependency="true">acrepo-libs-jsonld</feature>
    <feature version="${project.version}" dependency="true">acrepo-libs-jackson</feature>

    <bundle>mvn:org.apache.marmotta/ldcache-api/${marmotta.version}</bundle>

    <!-- locally wrapped OSGi bundles -->
    <bundle>${wrapped.bundle.location}/org.apache.marmotta.ldcache-core-${marmotta.version}.jar</bundle>
    <bundle>${wrapped.bundle.location}/org.apache.marmotta.ldclient-api-${marmotta.version}.jar</bundle>
    <bundle>${wrapped.bundle.location}/org.apache.marmotta.ldclient-core-${marmotta.version}.jar</bundle>
    <bundle>${wrapped.bundle.location}/org.apache.marmotta.marmotta-commons-${marmotta.version}.jar</bundle>
    <bundle>${wrapped.bundle.location}/org.apache.marmotta.ldclient-provider-rdf-${marmotta.version}.jar</bundle>
    <bundle>${wrapped.bundle.location}/org.apache.marmotta.ldclient-provider-rdfa-${marmotta.version}.jar</bundle>
    <bundle>${wrapped.bundle.location}/org.apache.marmotta.ldclient-provider-xml-${marmotta.version}.jar</bundle>

    <bundle dependency="true">mvn:commons-collections/commons-collections/${commons-collections.version}</bundle>
    <bundle dependency="true">mvn:com.google.guava/guava/${guava16.version}</bundle>
    <bundle dependency="true">mvn:joda-time/joda-time/${joda-time.version}</bundle>
    <bundle dependency="true">mvn:commons-validator/commons-validator/${commons-validator.version}</bundle>
    <bundle dependency="true">mvn:commons-beanutils/commons-beanutils/${commons-beanutils.version}</bundle>
    <bundle dependency="true">mvn:org.apache.commons/commons-lang3/${commons-lang.version}</bundle>
    <bundle dependency="true">mvn:ch.qos.cal10n/cal10n-api/${cal10n.version}</bundle>

    <bundle dependency="true">mvn:org.apache.httpcomponents/httpclient-osgi/${httpclient.version}</bundle>
    <bundle dependency="true">mvn:org.apache.httpcomponents/httpcore-osgi/${httpcore.version}</bundle>
    <bundle dependency="true">mvn:jaxen/jaxen/${jaxen.version}</bundle>

    <bundle dependency="true">${wrapped.bundle.location}/commons-digester.commons-digester-${commons-digester.version}.jar</bundle>
    <bundle dependency="true">${wrapped.bundle.location}/org.apache.httpcomponents.fluent-hc-${fluent-hc.version}.jar</bundle>
    <bundle dependency="true">${wrapped.bundle.location}/org.apache.httpcomponents.httpclient-cache-${httpclient-cache.version}.jar</bundle>
    <bundle dependency="true">${wrapped.bundle.location}/org.apache.httpcomponents.httpcore-nio-${httpcore-nio.version}.jar</bundle>
    <bundle dependency="true">${wrapped.bundle.location}/org.apache.httpcomponents.httpmime-${httpmime.version}.jar</bundle>
    <bundle dependency="true">${wrapped.bundle.location}/org.jdom.jdom2-${jdom2.version}.jar</bundle>

    <bundle dependency="true">${wrapped.bundle.location}/org.semarglproject.semargl-rdfa-${semargl.version}.jar</bundle>
    <bundle dependency="true">${wrapped.bundle.location}/org.semarglproject.semargl-core-${semargl.version}.jar</bundle>
    <bundle dependency="true">${wrapped.bundle.location}/org.semarglproject.semargl-rdf-${semargl.version}.jar</bundle>
    <bundle dependency="true">${wrapped.bundle.location}/org.semarglproject.semargl-sesame-${semargl.version}.jar</bundle>
  </feature>

  <feature name="acrepo-libs-jsonld" version="${project.version}">
    <details>Installs the JSON-LD related bundles</details>

    <bundle>mvn:com.github.jsonld-java/jsonld-java/${jsonld.version}</bundle>

    <feature version="${project.version}" dependency="true">acrepo-libs-jackson</feature>

    <bundle dependency="true">mvn:org.apache.httpcomponents/httpclient-osgi/${httpclient.version}</bundle>
    <bundle dependency="true">mvn:org.apache.httpcomponents/httpcore-osgi/${httpcore.version}</bundle>
    <bundle dependency="true">mvn:commons-codec/commons-codec/${commons-codec.version}</bundle>
    <bundle dependency="true">mvn:commons-io/commons-io/${commons-io.version}</bundle>
  </feature>

  <feature name="acrepo-libs-jackson" version="${project.version}">
    <details>Installs the Jackson Libraries</details>

    <bundle>mvn:com.fasterxml.jackson.core/jackson-core/${jackson2.version}</bundle>
    <bundle>mvn:com.fasterxml.jackson.core/jackson-annotations/${jackson2.version}</bundle>
    <bundle>mvn:com.fasterxml.jackson.core/jackson-databind/${jackson2.version}</bundle>
  </feature>

  <feature name="acrepo-connector-broadcast" version="${project.version}">
    <details>Installs the message broadcasting service</details>

    <feature version="${camel.version}">camel</feature>
    <feature version="${camel.version}">camel-blueprint</feature>
    <feature version="${activemq.version}">activemq-camel</feature>

    <bundle>mvn:edu.amherst.acdc/acrepo-connector-broadcast/${project.version}</bundle>

    <configfile finalname="/etc/edu.amherst.acdc.connector.broadcast.cfg">mvn:edu.amherst.acdc/acrepo-connector-broadcast/${project.version}/cfg/configuration</configfile>
  </feature>

</features>
